// This file was auto-generated by Fern from our API Definition.

package api

import (
	json "encoding/json"
	fmt "fmt"
	core "github.com/vellum-ai/vellum-client-go/core"
)

type AdHocExecutePrompt struct {
	MlModel        string                          `json:"ml_model" url:"-"`
	InputValues    []*DeprecatedPromptRequestInput `json:"input_values,omitempty" url:"-"`
	InputVariables []*VellumVariable               `json:"input_variables,omitempty" url:"-"`
	Parameters     *PromptParameters               `json:"parameters,omitempty" url:"-"`
	Settings       *PromptSettings                 `json:"settings,omitempty" url:"-"`
	Blocks         []*PromptBlock                  `json:"blocks,omitempty" url:"-"`
	Functions      []*FunctionDefinition           `json:"functions,omitempty" url:"-"`
	ExpandMeta     *AdHocExpandMeta                `json:"expand_meta,omitempty" url:"-"`
}

type AdHocExecutePromptStream struct {
	MlModel        string                          `json:"ml_model" url:"-"`
	InputValues    []*DeprecatedPromptRequestInput `json:"input_values,omitempty" url:"-"`
	InputVariables []*VellumVariable               `json:"input_variables,omitempty" url:"-"`
	Parameters     *PromptParameters               `json:"parameters,omitempty" url:"-"`
	Settings       *PromptSettings                 `json:"settings,omitempty" url:"-"`
	Blocks         []*PromptBlock                  `json:"blocks,omitempty" url:"-"`
	Functions      []*FunctionDefinition           `json:"functions,omitempty" url:"-"`
	ExpandMeta     *AdHocExpandMeta                `json:"expand_meta,omitempty" url:"-"`
}

type AdHocExecutePromptEvent struct {
	State     string
	Initiated *InitiatedAdHocExecutePromptEvent
	Streaming *StreamingAdHocExecutePromptEvent
	Fulfilled *FulfilledAdHocExecutePromptEvent
	Rejected  *RejectedAdHocExecutePromptEvent
}

func (a *AdHocExecutePromptEvent) UnmarshalJSON(data []byte) error {
	var unmarshaler struct {
		State string `json:"state"`
	}
	if err := json.Unmarshal(data, &unmarshaler); err != nil {
		return err
	}
	a.State = unmarshaler.State
	if unmarshaler.State == "" {
		return fmt.Errorf("%T did not include discriminant state", a)
	}
	switch unmarshaler.State {
	case "INITIATED":
		value := new(InitiatedAdHocExecutePromptEvent)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		a.Initiated = value
	case "STREAMING":
		value := new(StreamingAdHocExecutePromptEvent)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		a.Streaming = value
	case "FULFILLED":
		value := new(FulfilledAdHocExecutePromptEvent)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		a.Fulfilled = value
	case "REJECTED":
		value := new(RejectedAdHocExecutePromptEvent)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		a.Rejected = value
	}
	return nil
}

func (a AdHocExecutePromptEvent) MarshalJSON() ([]byte, error) {
	if a.Initiated != nil {
		return core.MarshalJSONWithExtraProperty(a.Initiated, "state", "INITIATED")
	}
	if a.Streaming != nil {
		return core.MarshalJSONWithExtraProperty(a.Streaming, "state", "STREAMING")
	}
	if a.Fulfilled != nil {
		return core.MarshalJSONWithExtraProperty(a.Fulfilled, "state", "FULFILLED")
	}
	if a.Rejected != nil {
		return core.MarshalJSONWithExtraProperty(a.Rejected, "state", "REJECTED")
	}
	return nil, fmt.Errorf("type %T does not define a non-empty union type", a)
}

type AdHocExecutePromptEventVisitor interface {
	VisitInitiated(*InitiatedAdHocExecutePromptEvent) error
	VisitStreaming(*StreamingAdHocExecutePromptEvent) error
	VisitFulfilled(*FulfilledAdHocExecutePromptEvent) error
	VisitRejected(*RejectedAdHocExecutePromptEvent) error
}

func (a *AdHocExecutePromptEvent) Accept(visitor AdHocExecutePromptEventVisitor) error {
	if a.Initiated != nil {
		return visitor.VisitInitiated(a.Initiated)
	}
	if a.Streaming != nil {
		return visitor.VisitStreaming(a.Streaming)
	}
	if a.Fulfilled != nil {
		return visitor.VisitFulfilled(a.Fulfilled)
	}
	if a.Rejected != nil {
		return visitor.VisitRejected(a.Rejected)
	}
	return fmt.Errorf("type %T does not define a non-empty union type", a)
}

type AdHocExpandMeta struct {
	// If enabled, the response will include model host cost tracking. This may increase latency for some model hosts.
	Cost *bool `json:"cost,omitempty" url:"cost,omitempty"`
	// If enabled, the response will include the model identifier representing the ML Model invoked by the Prompt.
	ModelName *bool `json:"model_name,omitempty" url:"model_name,omitempty"`
	// If enabled, the response will include model host usage tracking. This may increase latency for some model hosts.
	Usage *bool `json:"usage,omitempty" url:"usage,omitempty"`
	// If enabled, the response will include the reason provided by the model for why the execution finished.
	FinishReason *bool `json:"finish_reason,omitempty" url:"finish_reason,omitempty"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (a *AdHocExpandMeta) GetExtraProperties() map[string]interface{} {
	return a.extraProperties
}

func (a *AdHocExpandMeta) UnmarshalJSON(data []byte) error {
	type unmarshaler AdHocExpandMeta
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*a = AdHocExpandMeta(value)

	extraProperties, err := core.ExtractExtraProperties(data, *a)
	if err != nil {
		return err
	}
	a.extraProperties = extraProperties

	a._rawJSON = json.RawMessage(data)
	return nil
}

func (a *AdHocExpandMeta) String() string {
	if len(a._rawJSON) > 0 {
		if value, err := core.StringifyJSON(a._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(a); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", a)
}

// The subset of the metadata tracked by Vellum during prompt execution that the request opted into with `expand_meta`.
type AdHocFulfilledPromptExecutionMeta struct {
	Latency      *int              `json:"latency,omitempty" url:"latency,omitempty"`
	FinishReason *FinishReasonEnum `json:"finish_reason,omitempty" url:"finish_reason,omitempty"`
	Usage        *MlModelUsage     `json:"usage,omitempty" url:"usage,omitempty"`
	Cost         *Price            `json:"cost,omitempty" url:"cost,omitempty"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (a *AdHocFulfilledPromptExecutionMeta) GetExtraProperties() map[string]interface{} {
	return a.extraProperties
}

func (a *AdHocFulfilledPromptExecutionMeta) UnmarshalJSON(data []byte) error {
	type unmarshaler AdHocFulfilledPromptExecutionMeta
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*a = AdHocFulfilledPromptExecutionMeta(value)

	extraProperties, err := core.ExtractExtraProperties(data, *a)
	if err != nil {
		return err
	}
	a.extraProperties = extraProperties

	a._rawJSON = json.RawMessage(data)
	return nil
}

func (a *AdHocFulfilledPromptExecutionMeta) String() string {
	if len(a._rawJSON) > 0 {
		if value, err := core.StringifyJSON(a._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(a); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", a)
}

// The subset of the metadata tracked by Vellum during prompt execution that the request opted into with `expand_meta`.
type AdHocInitiatedPromptExecutionMeta struct {
	ModelName *string `json:"model_name,omitempty" url:"model_name,omitempty"`
	Latency   *int    `json:"latency,omitempty" url:"latency,omitempty"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (a *AdHocInitiatedPromptExecutionMeta) GetExtraProperties() map[string]interface{} {
	return a.extraProperties
}

func (a *AdHocInitiatedPromptExecutionMeta) UnmarshalJSON(data []byte) error {
	type unmarshaler AdHocInitiatedPromptExecutionMeta
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*a = AdHocInitiatedPromptExecutionMeta(value)

	extraProperties, err := core.ExtractExtraProperties(data, *a)
	if err != nil {
		return err
	}
	a.extraProperties = extraProperties

	a._rawJSON = json.RawMessage(data)
	return nil
}

func (a *AdHocInitiatedPromptExecutionMeta) String() string {
	if len(a._rawJSON) > 0 {
		if value, err := core.StringifyJSON(a._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(a); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", a)
}

// The subset of the metadata tracked by Vellum during prompt execution that the request opted into with `expand_meta`.
type AdHocRejectedPromptExecutionMeta struct {
	Latency      *int              `json:"latency,omitempty" url:"latency,omitempty"`
	FinishReason *FinishReasonEnum `json:"finish_reason,omitempty" url:"finish_reason,omitempty"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (a *AdHocRejectedPromptExecutionMeta) GetExtraProperties() map[string]interface{} {
	return a.extraProperties
}

func (a *AdHocRejectedPromptExecutionMeta) UnmarshalJSON(data []byte) error {
	type unmarshaler AdHocRejectedPromptExecutionMeta
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*a = AdHocRejectedPromptExecutionMeta(value)

	extraProperties, err := core.ExtractExtraProperties(data, *a)
	if err != nil {
		return err
	}
	a.extraProperties = extraProperties

	a._rawJSON = json.RawMessage(data)
	return nil
}

func (a *AdHocRejectedPromptExecutionMeta) String() string {
	if len(a._rawJSON) > 0 {
		if value, err := core.StringifyJSON(a._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(a); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", a)
}

// The subset of the metadata tracked by Vellum during prompt execution that the request opted into with `expand_meta`.
type AdHocStreamingPromptExecutionMeta struct {
	Latency *int `json:"latency,omitempty" url:"latency,omitempty"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (a *AdHocStreamingPromptExecutionMeta) GetExtraProperties() map[string]interface{} {
	return a.extraProperties
}

func (a *AdHocStreamingPromptExecutionMeta) UnmarshalJSON(data []byte) error {
	type unmarshaler AdHocStreamingPromptExecutionMeta
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*a = AdHocStreamingPromptExecutionMeta(value)

	extraProperties, err := core.ExtractExtraProperties(data, *a)
	if err != nil {
		return err
	}
	a.extraProperties = extraProperties

	a._rawJSON = json.RawMessage(data)
	return nil
}

func (a *AdHocStreamingPromptExecutionMeta) String() string {
	if len(a._rawJSON) > 0 {
		if value, err := core.StringifyJSON(a._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(a); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", a)
}

type DeprecatedPromptRequestInput struct {
	WorkflowInput      *WorkflowInput
	PromptRequestInput *PromptRequestInput
}

func (d *DeprecatedPromptRequestInput) UnmarshalJSON(data []byte) error {
	valueWorkflowInput := new(WorkflowInput)
	if err := json.Unmarshal(data, &valueWorkflowInput); err == nil {
		d.WorkflowInput = valueWorkflowInput
		return nil
	}
	valuePromptRequestInput := new(PromptRequestInput)
	if err := json.Unmarshal(data, &valuePromptRequestInput); err == nil {
		d.PromptRequestInput = valuePromptRequestInput
		return nil
	}
	return fmt.Errorf("%s cannot be deserialized as a %T", data, d)
}

func (d DeprecatedPromptRequestInput) MarshalJSON() ([]byte, error) {
	if d.WorkflowInput != nil {
		return json.Marshal(d.WorkflowInput)
	}
	if d.PromptRequestInput != nil {
		return json.Marshal(d.PromptRequestInput)
	}
	return nil, fmt.Errorf("type %T does not include a non-empty union type", d)
}

type DeprecatedPromptRequestInputVisitor interface {
	VisitWorkflowInput(*WorkflowInput) error
	VisitPromptRequestInput(*PromptRequestInput) error
}

func (d *DeprecatedPromptRequestInput) Accept(visitor DeprecatedPromptRequestInputVisitor) error {
	if d.WorkflowInput != nil {
		return visitor.VisitWorkflowInput(d.WorkflowInput)
	}
	if d.PromptRequestInput != nil {
		return visitor.VisitPromptRequestInput(d.PromptRequestInput)
	}
	return fmt.Errorf("type %T does not include a non-empty union type", d)
}

// The final data event returned indicating that the stream has ended and all final resolved values from the model can be found.
type FulfilledAdHocExecutePromptEvent struct {
	Outputs     []*PromptOutput                    `json:"outputs" url:"outputs"`
	ExecutionID string                             `json:"execution_id" url:"execution_id"`
	Meta        *AdHocFulfilledPromptExecutionMeta `json:"meta,omitempty" url:"meta,omitempty"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (f *FulfilledAdHocExecutePromptEvent) GetExtraProperties() map[string]interface{} {
	return f.extraProperties
}

func (f *FulfilledAdHocExecutePromptEvent) UnmarshalJSON(data []byte) error {
	type unmarshaler FulfilledAdHocExecutePromptEvent
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*f = FulfilledAdHocExecutePromptEvent(value)

	extraProperties, err := core.ExtractExtraProperties(data, *f)
	if err != nil {
		return err
	}
	f.extraProperties = extraProperties

	f._rawJSON = json.RawMessage(data)
	return nil
}

func (f *FulfilledAdHocExecutePromptEvent) String() string {
	if len(f._rawJSON) > 0 {
		if value, err := core.StringifyJSON(f._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(f); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", f)
}

// The initial data returned indicating that the response from the model has returned and begun streaming.
type InitiatedAdHocExecutePromptEvent struct {
	Meta        *AdHocInitiatedPromptExecutionMeta `json:"meta,omitempty" url:"meta,omitempty"`
	ExecutionID string                             `json:"execution_id" url:"execution_id"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (i *InitiatedAdHocExecutePromptEvent) GetExtraProperties() map[string]interface{} {
	return i.extraProperties
}

func (i *InitiatedAdHocExecutePromptEvent) UnmarshalJSON(data []byte) error {
	type unmarshaler InitiatedAdHocExecutePromptEvent
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*i = InitiatedAdHocExecutePromptEvent(value)

	extraProperties, err := core.ExtractExtraProperties(data, *i)
	if err != nil {
		return err
	}
	i.extraProperties = extraProperties

	i._rawJSON = json.RawMessage(data)
	return nil
}

func (i *InitiatedAdHocExecutePromptEvent) String() string {
	if len(i._rawJSON) > 0 {
		if value, err := core.StringifyJSON(i._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(i); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", i)
}

type PromptRequestAudioInput struct {
	// The variable's name, as defined in the Prompt.
	Key   string       `json:"key" url:"key"`
	Value *VellumAudio `json:"value" url:"value"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (p *PromptRequestAudioInput) GetExtraProperties() map[string]interface{} {
	return p.extraProperties
}

func (p *PromptRequestAudioInput) UnmarshalJSON(data []byte) error {
	type unmarshaler PromptRequestAudioInput
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*p = PromptRequestAudioInput(value)

	extraProperties, err := core.ExtractExtraProperties(data, *p)
	if err != nil {
		return err
	}
	p.extraProperties = extraProperties

	p._rawJSON = json.RawMessage(data)
	return nil
}

func (p *PromptRequestAudioInput) String() string {
	if len(p._rawJSON) > 0 {
		if value, err := core.StringifyJSON(p._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(p); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", p)
}

type PromptRequestChatHistoryInput struct {
	// The variable's name, as defined in the Prompt.
	Key   string         `json:"key" url:"key"`
	Value []*ChatMessage `json:"value" url:"value"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (p *PromptRequestChatHistoryInput) GetExtraProperties() map[string]interface{} {
	return p.extraProperties
}

func (p *PromptRequestChatHistoryInput) UnmarshalJSON(data []byte) error {
	type unmarshaler PromptRequestChatHistoryInput
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*p = PromptRequestChatHistoryInput(value)

	extraProperties, err := core.ExtractExtraProperties(data, *p)
	if err != nil {
		return err
	}
	p.extraProperties = extraProperties

	p._rawJSON = json.RawMessage(data)
	return nil
}

func (p *PromptRequestChatHistoryInput) String() string {
	if len(p._rawJSON) > 0 {
		if value, err := core.StringifyJSON(p._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(p); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", p)
}

type PromptRequestDocumentInput struct {
	// The variable's name, as defined in the Prompt.
	Key   string          `json:"key" url:"key"`
	Value *VellumDocument `json:"value" url:"value"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (p *PromptRequestDocumentInput) GetExtraProperties() map[string]interface{} {
	return p.extraProperties
}

func (p *PromptRequestDocumentInput) UnmarshalJSON(data []byte) error {
	type unmarshaler PromptRequestDocumentInput
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*p = PromptRequestDocumentInput(value)

	extraProperties, err := core.ExtractExtraProperties(data, *p)
	if err != nil {
		return err
	}
	p.extraProperties = extraProperties

	p._rawJSON = json.RawMessage(data)
	return nil
}

func (p *PromptRequestDocumentInput) String() string {
	if len(p._rawJSON) > 0 {
		if value, err := core.StringifyJSON(p._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(p); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", p)
}

type PromptRequestImageInput struct {
	// The variable's name, as defined in the Prompt.
	Key   string       `json:"key" url:"key"`
	Value *VellumImage `json:"value" url:"value"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (p *PromptRequestImageInput) GetExtraProperties() map[string]interface{} {
	return p.extraProperties
}

func (p *PromptRequestImageInput) UnmarshalJSON(data []byte) error {
	type unmarshaler PromptRequestImageInput
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*p = PromptRequestImageInput(value)

	extraProperties, err := core.ExtractExtraProperties(data, *p)
	if err != nil {
		return err
	}
	p.extraProperties = extraProperties

	p._rawJSON = json.RawMessage(data)
	return nil
}

func (p *PromptRequestImageInput) String() string {
	if len(p._rawJSON) > 0 {
		if value, err := core.StringifyJSON(p._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(p); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", p)
}

type PromptRequestInput struct {
	Type        string
	String      *PromptRequestStringInput
	JSON        *PromptRequestJSONInput
	ChatHistory *PromptRequestChatHistoryInput
	Audio       *PromptRequestAudioInput
	Video       *PromptRequestVideoInput
	Image       *PromptRequestImageInput
	Document    *PromptRequestDocumentInput
}

func (p *PromptRequestInput) UnmarshalJSON(data []byte) error {
	var unmarshaler struct {
		Type string `json:"type"`
	}
	if err := json.Unmarshal(data, &unmarshaler); err != nil {
		return err
	}
	p.Type = unmarshaler.Type
	if unmarshaler.Type == "" {
		return fmt.Errorf("%T did not include discriminant type", p)
	}
	switch unmarshaler.Type {
	case "STRING":
		value := new(PromptRequestStringInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		p.String = value
	case "JSON":
		value := new(PromptRequestJSONInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		p.JSON = value
	case "CHAT_HISTORY":
		value := new(PromptRequestChatHistoryInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		p.ChatHistory = value
	case "AUDIO":
		value := new(PromptRequestAudioInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		p.Audio = value
	case "VIDEO":
		value := new(PromptRequestVideoInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		p.Video = value
	case "IMAGE":
		value := new(PromptRequestImageInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		p.Image = value
	case "DOCUMENT":
		value := new(PromptRequestDocumentInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		p.Document = value
	}
	return nil
}

func (p PromptRequestInput) MarshalJSON() ([]byte, error) {
	if p.String != nil {
		return core.MarshalJSONWithExtraProperty(p.String, "type", "STRING")
	}
	if p.JSON != nil {
		return core.MarshalJSONWithExtraProperty(p.JSON, "type", "JSON")
	}
	if p.ChatHistory != nil {
		return core.MarshalJSONWithExtraProperty(p.ChatHistory, "type", "CHAT_HISTORY")
	}
	if p.Audio != nil {
		return core.MarshalJSONWithExtraProperty(p.Audio, "type", "AUDIO")
	}
	if p.Video != nil {
		return core.MarshalJSONWithExtraProperty(p.Video, "type", "VIDEO")
	}
	if p.Image != nil {
		return core.MarshalJSONWithExtraProperty(p.Image, "type", "IMAGE")
	}
	if p.Document != nil {
		return core.MarshalJSONWithExtraProperty(p.Document, "type", "DOCUMENT")
	}
	return nil, fmt.Errorf("type %T does not define a non-empty union type", p)
}

type PromptRequestInputVisitor interface {
	VisitString(*PromptRequestStringInput) error
	VisitJSON(*PromptRequestJSONInput) error
	VisitChatHistory(*PromptRequestChatHistoryInput) error
	VisitAudio(*PromptRequestAudioInput) error
	VisitVideo(*PromptRequestVideoInput) error
	VisitImage(*PromptRequestImageInput) error
	VisitDocument(*PromptRequestDocumentInput) error
}

func (p *PromptRequestInput) Accept(visitor PromptRequestInputVisitor) error {
	if p.String != nil {
		return visitor.VisitString(p.String)
	}
	if p.JSON != nil {
		return visitor.VisitJSON(p.JSON)
	}
	if p.ChatHistory != nil {
		return visitor.VisitChatHistory(p.ChatHistory)
	}
	if p.Audio != nil {
		return visitor.VisitAudio(p.Audio)
	}
	if p.Video != nil {
		return visitor.VisitVideo(p.Video)
	}
	if p.Image != nil {
		return visitor.VisitImage(p.Image)
	}
	if p.Document != nil {
		return visitor.VisitDocument(p.Document)
	}
	return fmt.Errorf("type %T does not define a non-empty union type", p)
}

type PromptRequestJSONInput struct {
	// The variable's name, as defined in the Prompt.
	Key   string      `json:"key" url:"key"`
	Value interface{} `json:"value,omitempty" url:"value,omitempty"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (p *PromptRequestJSONInput) GetExtraProperties() map[string]interface{} {
	return p.extraProperties
}

func (p *PromptRequestJSONInput) UnmarshalJSON(data []byte) error {
	type unmarshaler PromptRequestJSONInput
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*p = PromptRequestJSONInput(value)

	extraProperties, err := core.ExtractExtraProperties(data, *p)
	if err != nil {
		return err
	}
	p.extraProperties = extraProperties

	p._rawJSON = json.RawMessage(data)
	return nil
}

func (p *PromptRequestJSONInput) String() string {
	if len(p._rawJSON) > 0 {
		if value, err := core.StringifyJSON(p._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(p); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", p)
}

type PromptRequestStringInput struct {
	// The variable's name, as defined in the Prompt.
	Key   string `json:"key" url:"key"`
	Value string `json:"value" url:"value"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (p *PromptRequestStringInput) GetExtraProperties() map[string]interface{} {
	return p.extraProperties
}

func (p *PromptRequestStringInput) UnmarshalJSON(data []byte) error {
	type unmarshaler PromptRequestStringInput
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*p = PromptRequestStringInput(value)

	extraProperties, err := core.ExtractExtraProperties(data, *p)
	if err != nil {
		return err
	}
	p.extraProperties = extraProperties

	p._rawJSON = json.RawMessage(data)
	return nil
}

func (p *PromptRequestStringInput) String() string {
	if len(p._rawJSON) > 0 {
		if value, err := core.StringifyJSON(p._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(p); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", p)
}

type PromptRequestVideoInput struct {
	// The variable's name, as defined in the Prompt.
	Key   string       `json:"key" url:"key"`
	Value *VellumVideo `json:"value" url:"value"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (p *PromptRequestVideoInput) GetExtraProperties() map[string]interface{} {
	return p.extraProperties
}

func (p *PromptRequestVideoInput) UnmarshalJSON(data []byte) error {
	type unmarshaler PromptRequestVideoInput
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*p = PromptRequestVideoInput(value)

	extraProperties, err := core.ExtractExtraProperties(data, *p)
	if err != nil {
		return err
	}
	p.extraProperties = extraProperties

	p._rawJSON = json.RawMessage(data)
	return nil
}

func (p *PromptRequestVideoInput) String() string {
	if len(p._rawJSON) > 0 {
		if value, err := core.StringifyJSON(p._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(p); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", p)
}

// The final data returned indicating an error occurred during the stream.
type RejectedAdHocExecutePromptEvent struct {
	Error       *VellumError                      `json:"error" url:"error"`
	ExecutionID string                            `json:"execution_id" url:"execution_id"`
	Meta        *AdHocRejectedPromptExecutionMeta `json:"meta,omitempty" url:"meta,omitempty"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (r *RejectedAdHocExecutePromptEvent) GetExtraProperties() map[string]interface{} {
	return r.extraProperties
}

func (r *RejectedAdHocExecutePromptEvent) UnmarshalJSON(data []byte) error {
	type unmarshaler RejectedAdHocExecutePromptEvent
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*r = RejectedAdHocExecutePromptEvent(value)

	extraProperties, err := core.ExtractExtraProperties(data, *r)
	if err != nil {
		return err
	}
	r.extraProperties = extraProperties

	r._rawJSON = json.RawMessage(data)
	return nil
}

func (r *RejectedAdHocExecutePromptEvent) String() string {
	if len(r._rawJSON) > 0 {
		if value, err := core.StringifyJSON(r._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(r); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", r)
}

// The data returned for each delta during the prompt execution stream.
type StreamingAdHocExecutePromptEvent struct {
	Output      *PromptOutput                      `json:"output" url:"output"`
	OutputIndex int                                `json:"output_index" url:"output_index"`
	ExecutionID string                             `json:"execution_id" url:"execution_id"`
	Meta        *AdHocStreamingPromptExecutionMeta `json:"meta,omitempty" url:"meta,omitempty"`
	// The subset of the raw response from the model that the request opted into with `expand_raw`.
	Raw map[string]interface{} `json:"raw,omitempty" url:"raw,omitempty"`

	extraProperties map[string]interface{}
	_rawJSON        json.RawMessage
}

func (s *StreamingAdHocExecutePromptEvent) GetExtraProperties() map[string]interface{} {
	return s.extraProperties
}

func (s *StreamingAdHocExecutePromptEvent) UnmarshalJSON(data []byte) error {
	type unmarshaler StreamingAdHocExecutePromptEvent
	var value unmarshaler
	if err := json.Unmarshal(data, &value); err != nil {
		return err
	}
	*s = StreamingAdHocExecutePromptEvent(value)

	extraProperties, err := core.ExtractExtraProperties(data, *s)
	if err != nil {
		return err
	}
	s.extraProperties = extraProperties

	s._rawJSON = json.RawMessage(data)
	return nil
}

func (s *StreamingAdHocExecutePromptEvent) String() string {
	if len(s._rawJSON) > 0 {
		if value, err := core.StringifyJSON(s._rawJSON); err == nil {
			return value
		}
	}
	if value, err := core.StringifyJSON(s); err == nil {
		return value
	}
	return fmt.Sprintf("%#v", s)
}

type WorkflowInput struct {
	Type          string
	String        *StringInput
	JSON          *JSONInput
	ChatHistory   *ChatHistoryInput
	Number        *NumberInput
	SearchResults *SearchResultsInput
	Error         *ErrorInput
	Array         *ArrayInput
	FunctionCall  *FunctionCallInput
	Audio         *AudioInput
	Video         *VideoInput
	Image         *ImageInput
	Document      *DocumentInput
}

func (w *WorkflowInput) UnmarshalJSON(data []byte) error {
	var unmarshaler struct {
		Type string `json:"type"`
	}
	if err := json.Unmarshal(data, &unmarshaler); err != nil {
		return err
	}
	w.Type = unmarshaler.Type
	if unmarshaler.Type == "" {
		return fmt.Errorf("%T did not include discriminant type", w)
	}
	switch unmarshaler.Type {
	case "STRING":
		value := new(StringInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		w.String = value
	case "JSON":
		value := new(JSONInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		w.JSON = value
	case "CHAT_HISTORY":
		value := new(ChatHistoryInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		w.ChatHistory = value
	case "NUMBER":
		value := new(NumberInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		w.Number = value
	case "SEARCH_RESULTS":
		value := new(SearchResultsInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		w.SearchResults = value
	case "ERROR":
		value := new(ErrorInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		w.Error = value
	case "ARRAY":
		value := new(ArrayInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		w.Array = value
	case "FUNCTION_CALL":
		value := new(FunctionCallInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		w.FunctionCall = value
	case "AUDIO":
		value := new(AudioInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		w.Audio = value
	case "VIDEO":
		value := new(VideoInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		w.Video = value
	case "IMAGE":
		value := new(ImageInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		w.Image = value
	case "DOCUMENT":
		value := new(DocumentInput)
		if err := json.Unmarshal(data, &value); err != nil {
			return err
		}
		w.Document = value
	}
	return nil
}

func (w WorkflowInput) MarshalJSON() ([]byte, error) {
	if w.String != nil {
		return core.MarshalJSONWithExtraProperty(w.String, "type", "STRING")
	}
	if w.JSON != nil {
		return core.MarshalJSONWithExtraProperty(w.JSON, "type", "JSON")
	}
	if w.ChatHistory != nil {
		return core.MarshalJSONWithExtraProperty(w.ChatHistory, "type", "CHAT_HISTORY")
	}
	if w.Number != nil {
		return core.MarshalJSONWithExtraProperty(w.Number, "type", "NUMBER")
	}
	if w.SearchResults != nil {
		return core.MarshalJSONWithExtraProperty(w.SearchResults, "type", "SEARCH_RESULTS")
	}
	if w.Error != nil {
		return core.MarshalJSONWithExtraProperty(w.Error, "type", "ERROR")
	}
	if w.Array != nil {
		return core.MarshalJSONWithExtraProperty(w.Array, "type", "ARRAY")
	}
	if w.FunctionCall != nil {
		return core.MarshalJSONWithExtraProperty(w.FunctionCall, "type", "FUNCTION_CALL")
	}
	if w.Audio != nil {
		return core.MarshalJSONWithExtraProperty(w.Audio, "type", "AUDIO")
	}
	if w.Video != nil {
		return core.MarshalJSONWithExtraProperty(w.Video, "type", "VIDEO")
	}
	if w.Image != nil {
		return core.MarshalJSONWithExtraProperty(w.Image, "type", "IMAGE")
	}
	if w.Document != nil {
		return core.MarshalJSONWithExtraProperty(w.Document, "type", "DOCUMENT")
	}
	return nil, fmt.Errorf("type %T does not define a non-empty union type", w)
}

type WorkflowInputVisitor interface {
	VisitString(*StringInput) error
	VisitJSON(*JSONInput) error
	VisitChatHistory(*ChatHistoryInput) error
	VisitNumber(*NumberInput) error
	VisitSearchResults(*SearchResultsInput) error
	VisitError(*ErrorInput) error
	VisitArray(*ArrayInput) error
	VisitFunctionCall(*FunctionCallInput) error
	VisitAudio(*AudioInput) error
	VisitVideo(*VideoInput) error
	VisitImage(*ImageInput) error
	VisitDocument(*DocumentInput) error
}

func (w *WorkflowInput) Accept(visitor WorkflowInputVisitor) error {
	if w.String != nil {
		return visitor.VisitString(w.String)
	}
	if w.JSON != nil {
		return visitor.VisitJSON(w.JSON)
	}
	if w.ChatHistory != nil {
		return visitor.VisitChatHistory(w.ChatHistory)
	}
	if w.Number != nil {
		return visitor.VisitNumber(w.Number)
	}
	if w.SearchResults != nil {
		return visitor.VisitSearchResults(w.SearchResults)
	}
	if w.Error != nil {
		return visitor.VisitError(w.Error)
	}
	if w.Array != nil {
		return visitor.VisitArray(w.Array)
	}
	if w.FunctionCall != nil {
		return visitor.VisitFunctionCall(w.FunctionCall)
	}
	if w.Audio != nil {
		return visitor.VisitAudio(w.Audio)
	}
	if w.Video != nil {
		return visitor.VisitVideo(w.Video)
	}
	if w.Image != nil {
		return visitor.VisitImage(w.Image)
	}
	if w.Document != nil {
		return visitor.VisitDocument(w.Document)
	}
	return fmt.Errorf("type %T does not define a non-empty union type", w)
}
